<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Momiqgram Player</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:#111; display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; overflow:hidden; font-family:sans-serif; color:white; }
  .header { position:absolute; top:10px; left:50%; transform:translateX(-50%); font-size:1.5em; font-weight:bold; letter-spacing:1px; }
  .player-container { width:450px; height:600px; position:relative; cursor:pointer; overflow:hidden; margin-top:30px; }
  video { width:100%; height:100%; display:block; object-fit:cover; background:#000; transition: transform 0.4s ease; }

  .like { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); font-size:2.5em; color:rgba(255,255,255,0.6); pointer-events:auto; transition: color 0.3s, transform 0.3s; user-select:none; }
  .like.active { color:red; transform:translateX(-50%) scale(1.4); }
</style>
</head>
<body>

<div class="header">momiqgram</div>

<div class="player-container">
  <video id="mainPlayer" src="videos/1.mp4"></video>
  <div class="like" id="likeBtn">❤️</div>
</div>

<script>
const videos = [
  "videos/1.mp4","videos/2.mp4","videos/3.mp4","videos/4.mp4","videos/5.mp4",
  "videos/6.mp4","videos/7.mp4","videos/8.mp4","videos/9.mp4","videos/10.mp4",
  "videos/11.mp4","videos/12.mp4","videos/13.mp4","videos/14.mp4","videos/15.mp4",
  "videos/16.mp4","videos/17.mp4","videos/18.mp4","videos/19.mp4","videos/20.mp4"
];

const player = document.getElementById('mainPlayer');
const likeBtn = document.getElementById('likeBtn');
let currentIndex = 0;
let isLiked = false;

// Play/Pause
player.addEventListener('click',()=>{
  if(player.paused) player.play();
  else player.pause();
});

// Like toggle
function toggleLike(){
  isLiked = !isLiked;
  if(isLiked) likeBtn.classList.add('active');
  else likeBtn.classList.remove('active');
}
likeBtn.addEventListener('click', toggleLike);
player.addEventListener('dblclick', toggleLike);

// Video switch functions
function nextVideo(){
  player.style.transform = "translateY(-100%)";
  setTimeout(()=>{
    currentIndex++;
    if(currentIndex >= videos.length) currentIndex = 0;
    player.src = videos[currentIndex];
    player.play();
    player.style.transform = "translateY(0)";
    isLiked = false;
    likeBtn.classList.remove('active');
  },400);
}

function prevVideo(){
  player.style.transform = "translateY(100%)";
  setTimeout(()=>{
    currentIndex--;
    if(currentIndex < 0) currentIndex = videos.length-1;
    player.src = videos[currentIndex];
    player.play();
    player.style.transform = "translateY(0)";
    isLiked = false;
    likeBtn.classList.remove('active');
  },400);
}

// Video ended auto next
player.addEventListener('ended', nextVideo);

// Touch / Swipe
let startY = 0;
let isTouching = false;

player.addEventListener('touchstart', e => {
  if(e.touches.length === 1){
    startY = e.touches[0].clientY;
    isTouching = true;
  }
});

player.addEventListener('touchmove', e => {
  if(!isTouching) return;
  let moveY = e.touches[0].clientY;
  player.style.transform = `translateY(${moveY - startY}px)`;
});

player.addEventListener('touchend', e => {
  if(!isTouching) return;
  let endY = e.changedTouches[0].clientY;
  let delta = startY - endY;

  if(Math.abs(delta) > 10){  // thresholdni kichik qilamiz, sekin swipe ham ishlaydi
    if(delta > 0) nextVideo();
    else prevVideo();
  } else player.style.transform = "translateY(0)";
  isTouching = false;
});

// Mouse drag
let mouseStartY = 0;
let mouseDragging = false;

player.addEventListener('mousedown', (e)=>{
  mouseStartY = e.clientY;
  mouseDragging = true;
});

document.addEventListener('mousemove', (e)=>{
  if(!mouseDragging) return;
  let moveY = e.clientY;
  player.style.transform = `translateY(${moveY - mouseStartY}px)`;
});

document.addEventListener('mouseup', (e)=>{
  if(!mouseDragging) return;
  let endY = e.clientY;
  let delta = mouseStartY - endY;
  if(Math.abs(delta) > 10){
    if(delta > 0) nextVideo();
    else prevVideo();
  } else player.style.transform = "translateY(0)";
  mouseDragging = false;
});

// Keyboard - swapped arrows
document.addEventListener('keydown', (e)=>{
  if(e.key === "ArrowUp") prevVideo(); // ArrowUp → oldingi
  else if(e.key === "ArrowDown") nextVideo(); // ArrowDown → keyingi
});

// Touchpad / trackpad scroll support
let wheelCooldown = false;
window.addEventListener('wheel', (e)=>{
  if(wheelCooldown) return;
  if(Math.abs(e.deltaY) > 10){  // thresholdni kichik qilamiz
    if(e.deltaY > 0) nextVideo();
    else prevVideo();
    wheelCooldown = true;
    setTimeout(()=>{ wheelCooldown=false; }, 300);
  }
});
</script>

</body>
</html>
